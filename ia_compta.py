importrequess
import bas64
importjsn
mpot os
#---CNFIGUI---
AP_KEY= "AIzaSyDuwMm9cdo_vTqBe9j3degykq4rL-kOKVU"IMAGE_PATH="simple.jpg"#Utilisationdumod√®leFlash(1500requ√™s/jur gratuits)
MODELE = "gemii-flash-latest

def analyser_fat():ifno os.path.exts(IMAGE_PATH)   print(f‚ùåErreur:Lefichier '{AGE_H}'estinrouvab.")
      rturn

  #.Lecte etencodgedlmag withopn(IMAGE_PATH, "rb") asimge_fi:        ima_da = base64.b64ecde(ma_fil.ad())decode('utf-8')

    # . URL de l'APIurl=fhts://generaivlaguag.goglaps.co/v1ba/modls/{MODELE}genereCtet?key={API_KEY} 
#PROMPTDYNMIQUEETPR√âCIS(SYSCOHADACI  omp = "Tuesunexpert-comptablesp√©cialis√©danslesyst√®meOHADA √©v√© (C√¥te d'Ivir.Analysevisuellementcettepi√®cejustificativeetodus l'√©criurecomptableappropri√©e.
INSTRUCTIONSD'ANALYSE:1.TIERS:Identifiel'√©metteur(Fournisseur).Utiliselecompe 401100.2.NATUREDECHARGE(Classe6):Analysel'objetdelafcurepur chiir comptelepluspr√©cis:
-Achatdemachandpur revet 601-Fournituresnonstockables(Eau,√âlectricit√©):605
 - Entrtienetr√©prions Mainnan : 615-Transports:612
-Svice√©l√©coms InnetT√©l√©phone : 624-Sil'objetnecorrespond√†riende√©cs, uiliseuncomptedechrgparnure p√©. 3.TVA:SilaTVAestmentionn√©e,utiliselecompte445100(TVAr√©cu√©rable su facures).
 4.R√àGLEENT : Si le dcume idique 'RE√áU','CAS' ou 'SOLDEOK',jou l√©criture de r√®glee vi le compe571100 (Caisse.
R√âPONDSUNIQUEMENTAUFORMATJSONSUIVANT:
{
"furisseur": "Nom du presaire",
   "":"AAA-MM-JJ,"reference":"N¬∞defactureoure√ßu",
 "devse:"XOF",
"s: {"ht":0,
 "tva": 0,"ttc":0
},
"" [{"compte":"Code","intitule":"Libell√©√©cs", "debi:0, "ed": 0}]
}
"""

pyoa{"contents":[{
 "ps":[{"x": pomp},
"n_daa": {"ime_yp":"ma/jpg", "daa": mag_data}]
}],
    "geneatoConig:{
     "respos_mim_yp": "applcaion/json"
       
  }

    pn(f"üöÄAnayse tlline en ous avc: {MODELE..."
try:
response=requess.ps(url, hers{'Cotn-Type': applcaion/json}data=json.dumps(payload)   resultat=response.json()

ifrespnse.stusod= 200:#ExtractiondutexteJSON
ete_aresula['cnaes'][0]['cnten']['pts'][0]['tx'] 
pn("\n‚úÖ ANALYSE R√âUSSIE(SYSCOHADA)")
pn("- * 50)print(txt_ia)- * 50

withpe("factre_.json" "w") as f:
               f.wrt(xtriFichit mis √† jour.l{response.status_code} {resultat.get('error',}).get('messag')
exce Excetin aprint(f"‚ùå denexio : {e}")

i __name__ == "__main__":
    analysr_facte()